cmake_minimum_required(VERSION 3.26)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

file(GLOB SPIRV_HEADERS_H ${CMAKE_CURRENT_SOURCE_DIR}/include/spirv_cross/*.h)
file(GLOB SPIRV_HEADERS_HPP ${CMAKE_CURRENT_SOURCE_DIR}/include/spirv_cross/*.hpp)
file(GLOB SPIRV_SRC ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp)
file(GLOB SPIRV_H ${CMAKE_CURRENT_SOURCE_DIR}/*.h)
file(GLOB SPIRV_HPP ${CMAKE_CURRENT_SOURCE_DIR}/*.hpp)

add_library(SpirvCross STATIC 
	${SPIRV_SRC}
	${SPIRV_H}
	${SPIRV_HPP}
	${SPIRV_HEADERS_H}
	${SPIRV_HEADERS_HPP}) 

set_target_properties(SpirvCross PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY bin/SpirvCross/${OUTPUTCONFIG}
    LIBRARY_OUTPUT_DIRECTORY lib/SpirvCross/${OUTPUTCONFIG}
    ARCHIVE_OUTPUT_DIRECTORY lib/SpirvCross/${OUTPUTCONFIG})

target_include_directories(SpirvCross PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include ${CMAKE_CURRENT_SOURCE_DIR} ${SH_VENDOR_DIR}/glm)

if(WIN32)
	set(CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION CMAKE_VS_WINDOWS_TARGET_PLATFORM_VERSION_MAXIMUM)
endif()

if (CMAKE_BUILD_TYPE STREQUAL "Debug")
    set_property(TARGET SpirvCross PROPERTY MSVC_RUNTIME_LIBRARY "MultiThreadedDebug")
elseif()
    set_property(TARGET SpirvCross PROPERTY MSVC_RUNTIME_LIBRARY "MultiThreaded")
endif()